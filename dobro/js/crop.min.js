const cropAvaPopup=document.querySelector(".cropp-ava");if(cropAvaPopup){const e=document.querySelector(".file-form__ava"),r=e.querySelector("#reg_file"),o=cropAvaPopup.querySelector("#croppieContainer"),t=cropAvaPopup.querySelector("#cropBtn"),a=cropAvaPopup.querySelector("#crop-destroy"),c=e.querySelector(".file-form__img");e.querySelector('input[name="avatar"]');let i;const s=document.querySelector("#cropp-ava");r.addEventListener("change",(e=>{const t=e.target.files[0];if(!/image*/.test(t.type))return showMessages("error","Неверный формат файла"),void(r.value="");if(t.size>2097152)return r.value="",void showMessages("error","Неверный размер файла");const a=new FileReader;a.readAsDataURL(t),a.onload=()=>{const e=a.result,t=new Image;t.src=e,t.onload=function(){t.width>2056||t.height>2056?(r.value="",showMessages("error","Размеры изображения больше разрешенных")):(i&&i.destroy(),s.classList.add("open"),i=new Croppie(o,{url:e,enableExif:!0,viewport:{width:200,height:200,type:"square"},boundary:{width:400,height:400}}))}}})),t.addEventListener("click",(()=>{i.result({type:"blob",size:{width:200,height:200},format:"jpeg",quality:1,circle:!1}).then((e=>{const r=new File([e],"croppedFile.jpg",{type:"image/jpg",lastModified:Date.now()}),o=URL.createObjectURL(r);c.style.backgroundImage=`url(${o})`,s.classList.remove("open")}))})),a.addEventListener("click",(()=>s.classList.remove("open")))}